/**
 * Created by th on 18 Iul 2016.
 */
var printqCurrentyEditContent=[]
!function(e){"use strict"
function t(e,t,n){var a=new RegExp("([?&])"+t+"=.*?(&|$)","i"),i=e.indexOf("?")!==-1?"&":"?"
return e.match(a)?e.replace(a,"$1"+t+"="+n+"$2"):e+i+t+"="+n}function n(e){if(null==e||"object"!=typeof e)return e
var t
if(e instanceof Date)return t=new Date,t.setTime(e.getTime()),t
if(e instanceof Array){t=[]
for(var a=0,i=e.length;a<i;a++)t[a]=n(e[a])
return t}if(e instanceof Object){t={}
for(var r in e)e.hasOwnProperty(r)&&(t[r]=n(e[r]))
return t}console.error("Unable to copy object! Its type isn't supported.",e)}function a(){var t=e(this).data("dependent_key"),n=e(this).val()
e(".pqd_is_dependent[data-depends="+t+"]").each(function(t,a){var i=e(a).data("depends_value")
i==n?e(a).show():e(a).hide()})}e("#pqd_edit_template").click(function(a){a.preventDefault()
var i=e(this).attr("href"),r=parseInt(e("#pqd_template_canvas_width_value").val()),o=parseInt(e("#pqd_template_canvas_height_value").val())
if(!r)return void alert(pqd_admin.wrong_width)
if(!o)return void alert(pqd_admin.wrong_height)
i=t(i,"width",r),i=t(i,"height",o)
var d=e("#pqd_template_enable_3d_preview_value").val()
if(1==d){var l=e("#pqd_template_3d_model_value").val(),p=e("#pqd_template_3d_texture_value").val()
if(i=t(i,"3d_preview",1),!l)return void alert(pqd_admin.wrong_3d_model)
if(!p)return void alert(pqd_admin.wrong_3d_texture)
i=t(i,"3d_model",l),i=t(i,"3d_texture",p)}printqCurrentyEditContent=[]
var c=e("#content").val()
c=c?JSON.parse(c):[{content:"",width:r,height:o}],e.each(c,function(e,t){t.content_type="json",t.width=r,t.height=o,printqCurrentyEditContent.push(n(t))}),e.fancybox({type:"iframe",href:i,modal:!1,closeBtn:!0,padding:0,width:e(window).width(),height:"100%",autoSize:!0,scrolling:"auto",fitToView:!0,parent:"#wpcontent",wrapCSS:"pqd_iframe_content",iframe:{preload:!1},helpers:{overlay:{closeClick:!1}},openEffect:"none"})}),e(".has_dependents").each(a).on("change",a),e(document).ready(function(){e(".pqd_fancybox").click(function(e){e.preventDefault()}).fancybox({loop:!1,type:"image",autoScale:!0,autoDimensions:!0,centerOnScroll:!0,titlePosition:"over",titleFormat:function(e,t,n,a){return'<div id="fancybox-title-over" class="pqd_fancybox_title">'+pqd_admin.fb_title_template.replace("{index}",n+1)+"</div>"},onComplete:function(){e("#fancybox-wrap").hover(function(){e("#fancybox-title").show()},function(){e("#fancybox-title").hide()})}})})}(window.jQuery)
